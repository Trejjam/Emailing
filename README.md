Emailing========Library for <ul><li>managing emails</li><li>their groups</li><li>send email to group(s)</li><li>save email to IMAP</li></ul>Installation------------The best way to install Trejjam/Emailing is using  [Composer](http://getcomposer.org/):```sh$ composer require trejjam/emailing```Configuration RabbitMq----------------------Look how to configure [Kdyby/RabbitMq](https://github.com/Kdyby/RabbitMq/blob/master/docs/en/index.md)This extension need only 'rabbitmq.connection'```ymlextensions:	rabbitmq: Kdyby\RabbitMq\DI\RabbitMqExtensionrabbitmq:	connection:		default:			host: localhost			port: 5672			user: 'guest'			password: 'guest'			vhost: '/'```Configuration-------------.neon```ymlextensions:	emailing: Trejjam\DI\EmailingExtensionemailing:	tables   : 		emails      : 			table : send__emails			id    : id			email : email				groups      : 			table    : send__groups			id       : id			parentId : parent_id			name     : name			type     : 				name    : type				options : [public, private]		group_email : 			table      : send__group_email			id         : id			groupId    : group_id			emailId    : email_id			newsletter : 				name    : newsletter				options : [enable, disable]		senders     : 			table      : send__sender			id         : id			email      : email			configName : config_name	connect  : 		default : 			smtp          : FALSE #TRUE - use SmtpMailer NULL - disable connection FALSE - use SendmailMailer			host          : NULL			smtp_port     : NULL			username      : NULL			password      : NULL			secure        : ssl			imap          : FALSE			imap_host     : TRUE #TRUE -> use host			imap_port     : 993			imap_param    : /imap/ssl/validate-cert #Flags from http:#php.net/manual/en/function.imap-open.php			imap_username : TRUE #TRUE -> use username			imap_password : TRUE #TRUE -> use password		other:			...	rabbitmq : 		mailer    : 			templateDir : '/presenters/templates/'        		imap      : 			sendFolder : 'Sent.From web'        		producers : 			mailer : 				name       : NULL #NULL -> use mailer 				connection : default				exchange   : NULL #NULL -> use mailer			imap   : 				name       : NULL #NULL -> use imap				connection : default				exchange   : NULL		consumers : 			mailer : 				connection : default				exchange   : NULL				queue      : NULL            			imap   : 				connection : default				exchange   : NULL				queue      : NULL	cache    :		use     : TRUE		name    : emailing		timeout : 60 minutes```Config------The best way for configuration is using [Kdyby/Console](https://github.com/kdyby/console)```sh$ composer require kdyby/console```Read how to install [Kdyby/Console](https://github.com/Kdyby/Console/blob/master/docs/en/index.md)```shphp index.php```After successful installation display:```Available commands:Emailing	Emailing:imap       Basic IMAP task	Emailing:groups     Edit groups	Emailing:install    Install default tables	help                Displays help for a command	list                Lists commands```Config database---------------Create default tables:```shphp index.php Emailing:install```Config imap-----------List folders:```shphp index.php Emailing:imap [connectionName=default] -l```Add folder:```shphp index.php Emailing:imap [connectionName=default] -c folderName [-l]```Config groups-----------Add group:```shphp index.php Emailing:groups groupName [parentName] -c [-t type] [-l]```Move group:```shphp index.php Emailing:groups groupName [parentName] -m [-l]```Edit group:```shphp index.php Emailing:groups groupName -t type [-l]```Delete group:```shphp index.php Emailing:groups groupName -r [-l]```List all groups:```shphp index.php Emailing:groups -l```Usage-----Presenter/Model:```php	/**	* @var \Trejjam\Emailing\Rabbitmq\RabbitMailer @inject	*/	public $rabbitMailer;	/**     * @var \Trejjam\Emailing\Emails @inject     */    public $emails;    /**     * @var \Trejjam\Emailing\Groups @inject     */    public $groups;		function renderDefault() {		$this->rabbitMailer->sendMail("emails/newsEmail.latte", ["unsubscribe" => "http://linkUnsubscribe.ltd/emailId", "text" => "<h1>Head</h1><p>Interesting message</p>"], "mail@from.ltd", "mail@to.ltd", "subject", "default", TRUE);		//send email over RabbitMq use default connection and save email to IMAP		$this->rabbitMailer->sendMail("emails/newsEmail.latte", ["unsubscribe" => "http://linkUnsubscribe.ltd/emailId", "text" => "<h1>Head</h1><p>Interesting message</p>"], "mail@from.ltd", "mail@to.ltd", "subject", "otherConnection", TRUE);		//send email over RabbitMq use default otherConnection and save email to IMAP		$this->rabbitMailer->sendMail("emails/newsEmail.latte", ["unsubscribe" => "http://linkUnsubscribe.ltd/emailId", "text" => "<h1>Head</h1><p>Interesting message</p>"], "mail@from.ltd", "mail@to.ltd", "subject", "otherConnection", "default);		//send email over RabbitMq use default otherConnection and save email to IMAP using default connection						$email = $this->emails->addEmail("email@to.ltd");		$email2 = $this->emails->addEmail("email2@to.ltd");		$all=$this->groups->addGroup("all");		$group = $this->groups->addGroup("newsletter", "all");				$this->emails->addEmailToGroup($email, $group);		$this->emails->addEmailToGroup($email2, $all);				foreach ($all->getEmailsRecursive() as $v) {			dump($v->getEmail()); //email2@to.ltd, email@to.ltd		}		foreach ($all->getEmails() as $v) {			dump($v->getEmail()); //email2@to.ltd		}		foreach ($group->getEmails() as $v) {			dump($v->getEmail()); //email@to.ltd		}				dump($this->groups->getGroup("all")->containEmail($email)); //FALSE		dump($this->groups->getGroup("newsletter")->containEmail($email)); //TRUE		$this->emails->removeEmail("email@to.ltd", TRUE);		$this->emails->removeEmail("email2@to.ltd", TRUE);	}```